(self["webpackChunkwillykidd_github_io"]=self["webpackChunkwillykidd_github_io"]||[]).push([[471],{471:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return U}});var n=o(252),s=o(577),i=o(963);const l=t=>((0,n.dD)("data-v-bf387e7a"),t=t(),(0,n.Cn)(),t),r={id:"containerOuter"},a={id:"container"},d={id:"scoreContainer",class:"buttonPressed"},c={id:"flag"},u={id:"flagIndicator",class:"buttonPressed"},b={id:"face",class:"noSelect"},m=["src"],g={id:"tableContainer"},h={id:"table",class:"buttonPressed",oncontextmenu:"return false;"},p={id:"tableBody"},f=["onMouseup"],v={id:"optionTab"},y=l((()=>(0,n._)("div",{id:"optionContent"},"#Rows:",-1))),w=l((()=>(0,n._)("div",{id:"optionContent"},"#Columns:",-1))),I=l((()=>(0,n._)("div",{id:"optionContent"},"%Bombs:",-1))),C=l((()=>(0,n._)("div",null,"options",-1))),M=[C];function B(t,e,l,C,B,S){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",a,[(0,n._)("div",d,[(0,n._)("div",c,[(0,n._)("span",u,(0,s.zw)(this.flagStr),1)]),(0,n._)("div",b,[(0,n._)("img",{src:o(734)(`./${B.faceType}.svg`),class:"faceImg, noSelect, buttonNormal",onMousedown:e[0]||(e[0]=t=>S.buttonPress(t)),onMouseup:e[1]||(e[1]=t=>{S.buttonRelease(t),S.getFace(0),S.init(this.row,this.col,this.bombPercentage)}),onMouseleave:e[2]||(e[2]=t=>S.buttonRelease(t))},null,40,m)])]),(0,n._)("div",g,[(0,n._)("table",h,[(0,n._)("tbody",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.rowIndex,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.colIndex,(o=>((0,n.wg)(),(0,n.iD)("td",{key:o,class:"buttonNormal cellFixed",onMousedown:e[3]||(e[3]=t=>{S.buttonPress(t),S.getFace(1)}),onMouseup:[(0,i.iM)((e=>{e.target.classList.contains("flagged")||(S.uncoverWrap(t,o),S.buttonReleaseCell(e),S.getFace(0),e.target.classList.add("noClick"))}),["left"]),(0,i.iM)((e=>{S.toggleFlag(t,o,e)}),["right"])],onMouseout:e[4]||(e[4]=t=>{S.buttonRelease(t)})},null,40,f)))),128))])))),128))])])])]),(0,n._)("div",v,[y,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>B.rowInput=t),class:"optionInput",placeholder:">=7"},null,512),[[i.nr,B.rowInput,void 0,{lazy:!0}]]),w,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>B.colInput=t),class:"optionInput",placeholder:">=7"},null,512),[[i.nr,B.colInput,void 0,{lazy:!0}]]),I,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>B.bombPercentageInput=t),class:"optionInput",placeholder:"0-1"},null,512),[[i.nr,B.bombPercentageInput,void 0,{lazy:!0}]]),(0,n._)("div",{class:"optionButton buttonNormal",onMousedown:e[8]||(e[8]=t=>S.buttonPress(t)),onMouseup:e[9]||(e[9]=(0,i.iM)((t=>{S.buttonRelease(t),S.updateInit()}),["left"]))}," customize ",32),(0,n._)("div",{class:"optionButton buttonNormal",onMousedown:e[10]||(e[10]=t=>S.buttonPress(t)),onMouseup:e[11]||(e[11]=(0,i.iM)((t=>{S.buttonRelease(t),S.updateInit(1)}),["left"]))}," beginner ",32),(0,n._)("div",{class:"optionButton buttonNormal",onMousedown:e[12]||(e[12]=t=>S.buttonPress(t)),onMouseup:e[13]||(e[13]=(0,i.iM)((t=>{S.buttonRelease(t),S.updateInit(2)}),["left"]))}," intermediate ",32),(0,n._)("div",{class:"optionButton buttonNormal",onMousedown:e[14]||(e[14]=t=>S.buttonPress(t)),onMouseup:e[15]||(e[15]=(0,i.iM)((t=>{S.buttonRelease(t),S.updateInit(3)}),["left"]))}," master ",32)]),(0,n._)("div",{id:"optionShow",onMouseup:e[16]||(e[16]=(0,i.iM)((t=>{S.toggleOption()}),["left"]))},M,32)])}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function _(t,e){if("object"!==S(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t){var e=_(t,"string");return"symbol"===S(e)?e:String(e)}function k(t,e,o){return e=x(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const P={Start:0,Gaming:1,Won:2,Dead:3},L={Covered:0,Uncovered:1,Flagged:2};class F{constructor(){k(this,"state",void 0),k(this,"isBomb",void 0),k(this,"bombNum",void 0),this.state=L.Covered,this.isBomb=!1,this.bombNum=0}}class N{constructor(t,e,o){k(this,"row",void 0),k(this,"col",void 0),k(this,"flagCnt",void 0),k(this,"foundCnt",void 0),k(this,"bombCnt",void 0),k(this,"state",void 0),k(this,"cells",void 0),k(this,"bombPercentage",void 0),this.row=t,this.col=e,this.flagCnt=Math.floor(t*e*o),this.foundCnt=0,this.bombCnt=Math.floor(t*e*o),this.GameState=P.Start,this.cells=new Array(t);for(let n=0;n<t;n++){this.cells[n]=new Array(e);for(let t=0;t<e;t++)this.cells[n][t]=new F}this.bombInit()}bombInit(){let t=0;while(t!=this.bombCnt){let e=Math.floor(Math.random()*this.row),o=Math.floor(Math.random()*this.col);1!=this.cells[e][o].isBomb&&(this.cells[e][o].isBomb=!0,t++)}this.fillBombNum()}fillBombNum(){for(let t=0;t<this.col;t++)for(let e=0;e<this.row;e++)for(let o=Math.max(0,t-1);o<Math.min(this.row,t+2);o++)for(let n=Math.max(0,e-1);n<Math.min(this.col,e+2);n++)t==o&&e==n||1==this.cells[o][n].isBomb&&(this.cells[t][e].bombNum+=1)}toggleFlag(t,e){let o=this.cells[t][e].state;return o==L.Covered?0==this.flagCnt?(alert("no flags remain"),L.Covered):(this.flagCnt--,this.cells[t][e].state=L.Flagged,L.Flagged):o==L.Flagged?(this.flagCnt++,this.cells[t][e].state=L.Covered,L.Covered):o==L.Uncovered?L.Uncovered:this.cells[t][e].state}uncover(t,e){return this.cells[t][e].state==L.Uncovered?-2:(this.cells[t][e].state=L.Uncovered,1==this.cells[t][e].isBomb?(this.state=P.Dead,-1):(this.foundCnt++,this.foundCnt==this.row*this.col-this.bombCnt&&this.state!=P.Dead&&(this.state=P.Won),this.cells[t][e].bombNum))}}const E={data(){return{row:16,col:16,rowIndex:Array.from(Array(16).keys()),colIndex:Array.from(Array(16).keys()),bombPercentage:.15,board:new N(16,16,.15),faceType:"grin0",rowInput:null,colInput:null,bombPercentageInput:null,flagStr:"0038",optionShown:!0}},computed:{containerOuterHeight(){return Math.max(Math.floor(1.6*this.row+10),40).toString()+"rem"}},mounted(){document.title="Minesweeper"},methods:{boom(){document.getElementById("tableBody").classList.add("noClick");for(let t=0;t<this.row;t++)for(let e=0;e<this.col;e++){const o=this.board.uncover(t,e);if(-1==o){const o=document.getElementById("tableBody").rows[t].cells[e];o.classList.contains("flagged")?(o.classList.remove("flagged"),o.classList.add("boom2","uncovered","noSelect","noClick")):o.classList.add("boom","uncovered","noSelect","noClick")}}},buttonPress(t){t.target.classList.add("buttonPressed")},buttonReleaseCell(t){t.target.classList.remove("buttonPressed"),t.target.classList.add("noSelect","noClick")},buttonRelease(t){t.target.classList.remove("buttonPressed")},clearStyle(){const t=document.getElementById("tableBody"),e=t.rows.length;if(0==e)return;const o=t.rows[0].cells.length;for(let n=0;n<e;n++)for(let e=0;e<o;e++){const o=t.rows[n].cells[e];o.classList.remove("boom","uncovered","boomRed","flagged","bomb0","bomb1","bomb2","bomb3","bomb4","bomb5","bomb6","bomb7","bomb8","noClick","boom2","noSelect"),o.classList.add("bomb0")}document.getElementById("tableBody").classList.remove("noClick")},getFace(t){const e=this.board.state,o=Math.floor(2*Math.random());if(e!=P.Dead)return e==P.Won?(this.faceType="win",document.getElementById("tableBody").classList.add("noClick"),void this.$confetti.start()):void(this.faceType=1!=t?"grin"+o:"oops"+o);this.faceType="dead"+o},init(t,e,o){this.$confetti.stop(),this.rowIndex=Array.from(Array(parseInt(t)).keys()),this.colIndex=Array.from(Array(parseInt(e)).keys()),this.board=new N(t,e,o),this.clearStyle(),this.updateFlagCnt(),this.getFace(0)},toggleFlag(t,e,o){const n=this.board.toggleFlag(t,e);n==L.Flagged?o.target.classList.add("flagged"):n==L.Covered&&o.target.classList.remove("flagged"),this.updateFlagCnt()},toggleOption(){this.optionShown?(document.getElementById("optionTab").style.visibility="hidden",document.getElementById("optionShow").style.marginLeft="0",this.optionShown=!1):(document.getElementById("optionTab").style.visibility="visible",document.getElementById("optionShow").style.marginLeft="112.5px",this.optionShown=!0)},uncover(t,e){const o=this.board.uncover(t,e),n=document.getElementById("tableBody").rows[t].cells[e];return o>=0?(n.classList.remove("flagged"),n.classList.add(`bomb${o}`,"uncovered","noSelect","noClick")):-1==o&&(n.classList.add("boom","uncovered","boomRed","noSelect","noClick"),this.boom()),o},uncoverWrap(t,e){const o=this.uncover(t,e);if(-2!=o&&-1!=o){if(0==o)for(let o=Math.max(t-1,0);o<=Math.min(t+1,this.row-1);o++)for(let n=Math.max(e-1,0);n<=Math.min(e+1,this.col-1);n++)o==t&&n==e||this.uncoverWrap(o,n);this.board.state==P.Won&&(this.faceType="win",document.getElementById("tableBody").classList.add("noClick"),this.$confetti.start())}},updateFlagCnt(){const t=this.board.flagCnt;this.flagStr=("000"+t).slice(-4)},updateBeginner(){this.rowInput="8",this.colInput="8",this.bombPercentageInput="0.15"},updateInit(t=0){let e,o,n;if(0==t?(e=parseInt(this.rowInput,10),o=parseInt(this.colInput,10),n=parseFloat(this.bombPercentageInput)):1==t?(e=8,o=8,n=.15):2==t?(e=16,o=16,n=.15):3==t&&(e=32,o=32,n=.15),isNaN(e)||isNaN(o)||isNaN(n)||e<7||o<7)return void alert("Please check your inputs, #row and #col must >= 7.");if(n<0||n>1)return void alert("%Bombs: enter a number in range [0, 1].");this.clearStyle(),this.row=e,this.col=o,this.bombPercentage=n;let s=25*o,i=25*e;document.getElementById("tableContainer").style.width=`${s}px`,document.getElementById("tableContainer").style.height=`${i}px`,s+=40,i+=100,document.getElementById("container").style.width=`${s}px`,document.getElementById("container").style.height=`${i}px`;const l=Math.min(s-40,400);document.getElementById("scoreContainer").style.width=`${l}px`,this.getFace(0),this.init(e,o,n)}}},R=()=>{(0,i.sj)((t=>({"5ddf1278":t.containerOuterHeight})))},D=E.setup;E.setup=D?(t,e)=>(R(),D(t,e)):R;var T=E,A=o(744);const O=(0,A.Z)(T,[["render",B],["__scopeId","data-v-bf387e7a"]]);var U=O},734:function(t,e,o){var n={"./about.svg":821,"./bomb.svg":604,"./dead0.svg":679,"./dead1.svg":792,"./gallery.svg":42,"./grin0.svg":749,"./grin1.svg":440,"./oops0.svg":46,"./oops1.svg":506,"./plane.svg":49,"./playground.svg":251,"./win.svg":517};function s(t){var e=i(t);return o(e)}function i(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id=734},679:function(t,e,o){"use strict";t.exports=o.p+"img/dead0.3b78590b.svg"},792:function(t,e,o){"use strict";t.exports=o.p+"img/dead1.6015fa93.svg"},749:function(t,e,o){"use strict";t.exports=o.p+"img/grin0.04f143f6.svg"},440:function(t,e,o){"use strict";t.exports=o.p+"img/grin1.484204ce.svg"},46:function(t,e,o){"use strict";t.exports=o.p+"img/oops0.720ab729.svg"},506:function(t,e,o){"use strict";t.exports=o.p+"img/oops1.3f1f175e.svg"},517:function(t,e,o){"use strict";t.exports=o.p+"img/win.0b0d4b77.svg"}}]);
//# sourceMappingURL=471.a2d6afee.js.map